(this["webpackJsonpjwt-boilerplate"]=this["webpackJsonpjwt-boilerplate"]||[]).push([[0],{156:function(e,t,n){},157:function(e,t,n){},161:function(e,t,n){},167:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(37),o=n.n(a),s=(n(155),n(156),n(12)),c=n(10),i=(n(157),n(13)),l=n(43),u=n(38),j=n(7),h=n.n(j),d=n(2);function p(e){return Object(d.jsx)("span",{className:"error",children:e.error})}n(161);function b(){var e=localStorage.getItem("token");e&&(JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3&&(localStorage.removeItem("token"),e=null));return e}var g={setToken:function(e){e?localStorage.setItem("token",e):localStorage.removeItem("token")},getToken:b,removeToken:function(){localStorage.removeItem("token")},getUserFromToken:function(){var e=b();return e?JSON.parse(atob(e.split(".")[1])).user:null}},f="/api/users/";var O={signup:function(e){return fetch(f+"signup",{method:"POST",body:e}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))})).then((function(e){var t=e.token;return g.setToken(t)}))},logout:function(){g.removeToken()},login:function(e){return fetch(f+"login",{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))})).then((function(e){var t=e.token;return g.setToken(t)}))},getUser:function(){return g.getUserFromToken()},getProfile:function(e){return console.log("getProfile calling"),fetch(f+e,{headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error("Error from getProfile Request, check the server terminal!")}))}},m=n(21),x=n(210),v=n(205),k=n(212),w=n(208);function y(e){var t=Object(r.useState)({message:"",passwordError:!1}),n=Object(s.a)(t,2),a=n[0],o=n[1],j=Object(r.useState)({username:"",email:"",password:"",passwordConf:""}),b=Object(s.a)(j,2),g=b[0],f=b[1],y=Object(r.useState)(""),L=Object(s.a)(y,2),C=L[0],S=L[1],U=Object(c.g)();function E(e){f(Object(u.a)(Object(u.a)({},g),{},Object(l.a)({},e.target.name,e.target.value)))}function P(e,t){return e===t}function I(){return(I=Object(i.a)(h.a.mark((function t(n){var r,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),P(g.password,g.passwordConf)){t.next=3;break}return t.abrupt("return",o({message:"Passwords Must Match!",passwordError:!0}));case 3:for(a in o({message:"",passwordError:!1}),(r=new FormData).append("photo",C),g)r.append(a,g[a]);return console.log(r.forEach((function(e){return console.log(e)})),"<- this is each value in the formData"),t.prev=8,t.next=11,O.signup(r);case 11:e.handleSignUpOrLogin(),U("/"),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(8),o({message:t.t0.message,passwordError:!1});case 18:case"end":return t.stop()}}),t,null,[[8,15]])})))).apply(this,arguments)}return Object(d.jsx)(x.a,{className:"test",textAlign:"center",style:{height:"100vh",width:"100vw"},verticalAlign:"middle",children:Object(d.jsxs)(x.a.Column,{className:"SignUpColumn",style:{maxWidth:450},inverted:!0,children:[Object(d.jsxs)(v.a,{className:"SignUpForm",onSubmit:function(e){return I.apply(this,arguments)},inverted:!0,children:[Object(d.jsxs)(k.a,{inverted:!0,stacked:!0,children:[Object(d.jsx)("h1",{as:"h2",children:"Please Sign Up"}),Object(d.jsx)(v.a.Input,{name:"username",placeholder:"username",value:g.username,onChange:E,required:!0}),Object(d.jsx)(v.a.Input,{type:"email",name:"email",placeholder:"email",value:g.email,onChange:E,required:!0}),Object(d.jsx)(v.a.Input,{type:"password",name:"password",placeholder:"password",value:g.password,onChange:E,required:!0}),Object(d.jsx)(v.a.Input,{type:"password",name:"passwordConf",placeholder:"password Confirmation",value:g.passwordConf,onChange:E,required:!0}),Object(d.jsx)(v.a.Input,{type:"file",name:"photo",placeholder:"upload image",onChange:function(e){console.log(e.target.files,"<-- this is the image upload"),S(e.target.files[0])},required:!0}),Object(d.jsx)(w.a,{type:"submit",children:"Sign up"})]}),a.message?Object(d.jsx)(p,{error:a.message}):null]}),Object(d.jsx)(k.a,{inverted:!0,children:Object(d.jsxs)("h3",{children:["If you have an account, please ",Object(d.jsx)(m.b,{to:"/login",children:"Log In"})]})})]})})}n(167);function L(e){var t=Object(r.useState)(""),n=Object(s.a)(t,2),a=n[0],o=n[1],j=Object(r.useState)({username:"",password:""}),b=Object(s.a)(j,2),g=b[0],f=b[1],y=Object(c.g)();function L(e){f(Object(u.a)(Object(u.a)({},g),{},Object(l.a)({},e.target.name,e.target.value)))}function C(){return(C=Object(i.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,O.login(g);case 4:e.handleSignUpOrLogin(),y("/"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),o(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(d.jsx)(x.a,{className:"LoginGrid",textAlign:"center",style:{height:"100vh",width:"100vw"},verticalAlign:"middle",children:Object(d.jsxs)(x.a.Column,{style:{maxWidth:450},className:"LoginColumn",inverted:!0,children:[Object(d.jsxs)(v.a,{onSubmit:function(e){return C.apply(this,arguments)},className:"LoginForm",inverted:!0,children:[Object(d.jsxs)(k.a,{inverted:!0,children:[Object(d.jsx)("h1",{as:"h2",children:"Please log in below"}),Object(d.jsx)(v.a.Input,{type:"username",name:"username",placeholder:"username",value:g.username,onChange:L,required:!0}),Object(d.jsx)(v.a.Input,{type:"password",name:"password",placeholder:"password",value:g.password,onChange:L,required:!0}),Object(d.jsx)(w.a,{type:"submit",children:"Log in"})]}),a.message?Object(d.jsx)(p,{error:a.message}):null]}),Object(d.jsx)(k.a,{inverted:!0,children:Object(d.jsxs)("h3",{children:["If you do not have an account, please ",Object(d.jsx)(m.b,{to:"/Signup",children:"Sign up."})]})})]})})}var C=n(111),S=(n(168),n(213)),U=n(136),E=n(206),P=n(54),I=n(204),T=(n(169),n(203)),A="/api/";function z(e){return fetch("".concat(A,"posts/").concat(e,"/likes"),{method:"POST",headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error(e.error)}))}function D(e){return fetch("".concat(A,"likes/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error(e.error)}))}n(170);var N="/api/";function R(e){return fetch("".concat(N,"posts/").concat(e,"/listenlater"),{method:"POST",headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error(e.error)}))}function q(e){return fetch("".concat(N,"listenlater/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){if(e.ok)return e.json();throw new Error(e.error)}))}var F="/api/posts";function B(e){return fetch(F,{method:"POST",body:e,headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))}))}function W(){return fetch(F,{headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))}))}function _(e){return fetch("/api/posts/"+e,{method:"DELETE",headers:{Authorization:"Bearer "+g.getToken()}}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw console.log(e),new Error(e.err)}))}))}var J=n(202);function G(){return Object(d.jsx)(J.a,{size:"medium",active:!0,children:"Loading"})}n(186);var H=n(207);function M(e){var t=e.posts,n=e.loggedUser,r=e.isProfile,a=e.addLike,o=e.removeLike,s=e.listenLater,c=e.removeListenLater,i=e.deletePost,l=t.likes.findIndex((function(e){return e.username===n.username})),u=l>-1?"blue":"grey",j=l>-1?function(){return o(t.likes[l]._id)}:function(){return a(t._id)},h=t.listenlater.findIndex((function(e){return e.username===n.username})),p=h>-1?"blue":"grey",b=h>-1?function(){return c(t.listenlater[h]._id)}:function(){return s(t._id)};return Object(d.jsxs)(H.a,{style:{maxWidth:550,maxHeight:800},color:"green",raised:!0,children:[r?"":Object(d.jsx)(H.a.Content,{children:Object(d.jsx)(H.a.Header,{children:Object(d.jsxs)(m.b,{to:"/".concat(t.user.username),children:[Object(d.jsx)(U.a,{size:"large",avatar:!0,src:t.user.photoUrl?t.user.photoUrl:"https://react.semantic-ui.com/images/wireframe/square-image.png"}),t.user.username]})})}),Object(d.jsx)(U.a,{size:"big",src:"".concat(null===t||void 0===t?void 0:t.photoUrl),bordered:!0}),Object(d.jsxs)(H.a.Content,{children:[Object(d.jsxs)(H.a.Description,{children:["Artist: ",t.artist]}),Object(d.jsxs)(H.a.Description,{children:["Genre: ",t.genre]}),Object(d.jsxs)(H.a.Description,{children:["Song: ",t.song]}),Object(d.jsxs)(H.a.Description,{children:["Mood: ",t.mood]})]}),Object(d.jsxs)(H.a.Content,{children:[Object(d.jsx)(P.a,{name:"thumbs up",color:u,onClick:j}),t.likes.length," Likes"]}),Object(d.jsxs)(H.a.Content,{children:[Object(d.jsx)(P.a,{name:"heart",color:p,onClick:b})," ",t.listenlater.length," Listen to later"]}),Object(d.jsx)(H.a.Content,{children:t.user.username===n.username?Object(d.jsx)("button",{onClick:function(){i(t._id)},children:"Delete"}):" "})]},t._id)}var Y=n(211);function $(e){var t=e.posts,n=e.isProfile,r=e.loggedUser,a=e.loading,o=e.addLike,s=e.removeLike,c=e.listenLater,i=e.removeListenLater,l=e.deletePost;return Object(d.jsxs)(H.a.Group,{itemsPerRow:1,stackable:!0,children:[a?Object(d.jsxs)(k.a,{children:[Object(d.jsx)(Y.a,{active:!0,inverted:!0,children:Object(d.jsx)(G,{size:"small",children:"Loading"})}),Object(d.jsx)(U.a,{src:"https://react.semantic-ui.com/images/wireframe/short-paragraph.png"})]}):null,t.reverse().map((function(e){return Object(d.jsx)(M,{style:{maxWidth:400,maxHeight:600},posts:e,loggedUser:r,isProfile:n,addLike:o,removeLike:s,listenLater:c,removeListenLater:i,deletePost:l},e._id)}))]})}function K(e){var t=e.loggedUser,n=Object(r.useState)([]),a=Object(s.a)(n,2),o=a[0],l=a[1],u=Object(r.useState)({}),j=Object(s.a)(u,2),p=(j[0],j[1]),b=Object(r.useState)(""),g=Object(s.a)(b,2),f=(g[0],g[1]),m=Object(r.useState)(!0),v=Object(s.a)(m,2),k=(v[0],v[1]),w=Object(c.h)().username;function y(){return(y=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t);case 3:n=e.sent,console.log(n,"<-- adding a like"),P(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f("Cannot add a like, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function L(){return(L=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t);case 3:n=e.sent,console.log(n,"<- Removing a like"),P(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f("Cannot remove a like, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function S(){return(S=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t);case 3:n=e.sent,console.log(n,"<-- favoriting"),P(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f("Cannot save for later, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function E(){return(E=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t);case 3:n=e.sent,console.log(n,"<- removing"),P(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f("Cannot remove, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var P=Object(r.useCallback)(Object(i.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.getProfile(w);case 3:t=e.sent,p(t.data.user),l(t.data.posts),console.log(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message),f("Profile does not exist! You are in the wrong place");case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[w]);function I(){return(I=Object(i.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,k(!0),e.next=4,_(t);case 4:e.sent,A(),k(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),f("Error deleting posts, try again.");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function A(){return N.apply(this,arguments)}function N(){return(N=Object(i.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W();case 3:t=e.sent,l(Object(C.a)(t.data)),k(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),k(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){console.log("It is working!!"),P()}),[w,P]),Object(d.jsxs)(x.a,{centered:!0,children:[Object(d.jsx)(x.a.Row,{children:Object(d.jsx)(x.a.Column,{children:Object(d.jsx)(Q,{loggedUser:t})})}),Object(d.jsx)(x.a.Row,{centered:!0,children:Object(d.jsxs)("h1",{children:["Welcome to ",w,"'s page"]})}),Object(d.jsx)(x.a.Row,{centered:!0,children:Object(d.jsx)(U.a,{className:"profile",rounded:!0,src:null!==t&&void 0!==t&&t.photoUrl?null===t||void 0===t?void 0:t.photoUrl:"https://react.semantic-ui.com/images/wireframe/square-image.png",avatar:!0,size:"small"})}),Object(d.jsx)(x.a.Row,{centered:!0,children:Object(d.jsx)("span",{children:Object(d.jsxs)("h1",{children:["Total posts: ",o.length]})})}),Object(d.jsx)(T.a,{}),Object(d.jsx)(x.a.Row,{children:Object(d.jsx)(x.a.Column,{centered:!0,style:{maxWidth:600},children:Object(d.jsx)($,{posts:o,isProfile:!0,loggedUser:t,addLike:function(e){return y.apply(this,arguments)},removeLike:function(e){return L.apply(this,arguments)},listenLater:function(e){return S.apply(this,arguments)},removeListenLater:function(e){return E.apply(this,arguments)},deletePost:function(e){return I.apply(this,arguments)}})})})]})}function Q(e){var t=e.loggedUser;e.handleLogout;return Object(d.jsxs)(k.a,{id:"header",className:"links",children:[Object(d.jsx)(S.a,{as:"h2",floated:"left",children:Object(d.jsxs)(m.b,{to:"/".concat(null===t||void 0===t?void 0:t.username),children:[Object(d.jsx)(U.a,{circular:!0,src:null!==t&&void 0!==t&&t.photoUrl?null===t||void 0===t?void 0:t.photoUrl:"https://react.semantic-ui.com/images/wireframe/square-image.png",avatar:!0,size:"tiny"}),Object(d.jsxs)("span",{children:[" ",null===t||void 0===t?void 0:t.username]})]})}),Object(d.jsx)(S.a,{children:Object(d.jsx)("h1",{className:"musicbox",children:" Music Box"})}),Object(d.jsxs)(E.a,{horizontal:!0,floated:"right",children:[Object(d.jsx)(E.a.Item,{children:Object(d.jsx)("h2",{textAlign:"justified",children:Object(d.jsx)(m.b,{to:"/",children:Object(d.jsx)(P.a,{name:"home",color:"blue"})})})}),Object(d.jsx)(E.a.Item,{children:Object(d.jsx)(E.a.Content,{children:Object(d.jsx)(E.a.Content,{children:Object(d.jsx)("h2",{textAlign:"justified",children:Object(d.jsx)(I.a,{content:"Profile",trigger:Object(d.jsx)(m.b,{to:"/".concat(null===t||void 0===t?void 0:t.username),children:Object(d.jsx)(P.a,{name:"user outline",color:"blue"})}),inverted:!0})})})})}),Object(d.jsx)(E.a.Item,{children:Object(d.jsx)(E.a.Content,{children:Object(d.jsx)("h2",{textAlign:"justified",children:Object(d.jsx)(m.b,{to:"/Login",children:Object(d.jsx)(P.a,{name:"log out",color:"blue"})})})})})]})]})}function V(e){var t=Object(r.useState)({song:"",artist:"",genre:"",mood:""}),n=Object(s.a)(t,2),a=n[0],o=n[1],c=Object(r.useState)(""),i=Object(s.a)(c,2),j=i[0],h=i[1];function p(e){o(Object(u.a)(Object(u.a)({},a),{},Object(l.a)({},e.target.name,e.target.value)))}function b(t){t.preventDefault();var n=new FormData;for(var r in n.append("photo",j),a)n.append(r,a[r]);console.log(n.forEach((function(e){return console.log(e)})),"<- this is each value"),e.handleAddPost(n)}return Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(I.a,{content:Object(d.jsx)(k.a,{style:{maxWidth:450},position:"center",children:Object(d.jsxs)(v.a,{onSubmit:b,children:[Object(d.jsx)(v.a.Input,{name:"song",value:a.song,placeholder:"Song",onChange:p}),Object(d.jsx)(v.a.Input,{name:"artist",value:a.artist,placeholder:"Artist",onChange:p}),Object(d.jsx)(v.a.Input,{name:"genre",value:a.genre,placeholder:"Genre",onChange:p}),Object(d.jsx)(v.a.Input,{name:"mood",value:a.mood,placeholder:"mood",onChange:p}),Object(d.jsx)(v.a.Field,{children:Object(d.jsx)(v.a.Input,{type:"file",name:"photo",placeholder:"upload image",onChange:function(e){h(e.target.files[0])}})}),Object(d.jsx)(w.a,{type:"submit",size:"large",onClick:b,children:"Submit Post!"})]})}),on:"click",positionFixed:!0,trigger:Object(d.jsxs)(w.a,{animated:"vertical",size:"large",children:[Object(d.jsx)(w.a.Content,{visible:!0,children:Object(d.jsx)(P.a,{name:"add square",color:"blue",size:"large"})}),Object(d.jsx)(w.a.Content,{hidden:!0,children:"Add a Post!"})]})})})}function X(e){var t=e.loggedUser,n=e.handleLogout,a=Object(r.useState)([]),o=Object(s.a)(a,2),c=o[0],l=o[1],u=Object(r.useState)(!0),j=Object(s.a)(u,2),p=j[0],b=j[1],g=Object(r.useState)(""),f=Object(s.a)(g,2),O=f[0],m=f[1];function v(){return(v=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t);case 3:n=e.sent,console.log(n,"<-- adding a like"),S(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),m("Cannot add a like, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function k(){return(k=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t);case 3:n=e.sent,console.log(n,"<- Removing a like"),S(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),m("Cannot remove a like, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function w(){return(w=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t);case 3:n=e.sent,console.log(n,"<-- favoriting"),S(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),m("Cannot save for later, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function y(){return(y=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t);case 3:n=e.sent,console.log(n,"<- removing"),S(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),m("Cannot remove, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function L(){return L=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,B(t);case 4:n=e.sent,console.log(n),S(),b(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),m("Error creating post, please try again");case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),L.apply(this,arguments)}function S(){return U.apply(this,arguments)}function U(){return(U=Object(i.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,W();case 3:t=e.sent,l(Object(C.a)(t.data)),b(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),b(!1);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function E(){return(E=Object(i.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b(!0),e.next=4,_(t);case 4:e.sent,S(),b(!1),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),m("Error deleting posts, try again.");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){S()}),[]),O?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(Q,{handleLogout:n,loggedUser:t})}):p?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Q,{handleLogout:n,loggedUser:t}),Object(d.jsx)(G,{})]}):Object(d.jsxs)(x.a,{centered:!0,children:[Object(d.jsx)(x.a.Row,{children:Object(d.jsx)(x.a.Column,{children:Object(d.jsx)(Q,{handleLogout:n,loggedUser:t})})}),Object(d.jsx)(x.a.Row,{centered:!0,children:Object(d.jsx)(V,{handleAddPost:function(e){return L.apply(this,arguments)}})}),Object(d.jsx)(x.a.Row,{children:Object(d.jsx)(x.a.Column,{centered:!0,style:{maxWidth:600},children:Object(d.jsx)($,{posts:c,loggedUser:t,loading:p,isProfile:!1,addLike:function(e){return v.apply(this,arguments)},removeLike:function(e){return k.apply(this,arguments)},listenLater:function(e){return w.apply(this,arguments)},removeListenLater:function(e){return y.apply(this,arguments)},deletePost:function(e){return E.apply(this,arguments)}})})})]})}function Z(e){var t=e.loggedUser,n=Object(r.useState)([]),a=Object(s.a)(n,2),o=a[0],l=a[1],u=Object(r.useState)({}),j=Object(s.a)(u,2),p=(j[0],j[1]),b=Object(r.useState)(""),g=Object(s.a)(b,2),f=(g[0],g[1]),m=Object(c.h)().username;function x(){return(x=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(t);case 3:n=e.sent,console.log(n,"<-- adding a like"),y(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f("Cannot add a like, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function v(){return(v=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(t);case 3:n=e.sent,console.log(n,"<- Removing a like"),y(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f("Cannot remove a like, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function k(){return(k=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R(t);case 3:n=e.sent,console.log(n,"<-- favoriting"),y(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f("Cannot save for later, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function w(){return(w=Object(i.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q(t);case 3:n=e.sent,console.log(n,"<- removing"),y(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),f("Cannot remove, try again");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}var y=Object(r.useCallback)(Object(i.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.getProfile(m);case 3:t=e.sent,p(t.data.user),l(t.data.posts),console.log(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0.message),f("Profile does not exist! You are in the wrong place");case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[m]);return Object(r.useEffect)((function(){console.log("It is working!!"),y()}),[m,y]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Q,{loggedUser:t}),Object(d.jsx)($,{posts:o,numPhotosCol:1,isProfile:!0,loggedUser:t,addLike:function(e){return x.apply(this,arguments)},removeLike:function(e){return v.apply(this,arguments)},listenLater:function(e){return k.apply(this,arguments)},removeListenLater:function(e){return w.apply(this,arguments)}}),Object(d.jsx)("h1",{children:"Listen to these songs later"})]})}var ee=function(){var e=Object(r.useState)(O.getUser()),t=Object(s.a)(e,2),n=t[0],a=t[1];function o(){a(O.getUser())}function i(){O.logout(),a(null)}return n?Object(d.jsxs)(c.d,{children:[Object(d.jsx)(c.b,{path:"/",element:Object(d.jsx)(X,{loggedUser:n,handleLogout:i})}),Object(d.jsx)(c.b,{path:"/login",element:Object(d.jsx)(L,{handleSignUpOrLogin:o})}),Object(d.jsx)(c.b,{path:"/signup",element:Object(d.jsx)(y,{handleSignUpOrLogin:o})}),Object(d.jsx)(c.b,{path:"/listenlater",element:Object(d.jsx)(Z,{loggedUser:n,handleLogout:i})}),Object(d.jsx)(c.b,{path:"/:username",element:Object(d.jsx)(K,{loggedUser:n,handleLogout:i})})]}):Object(d.jsxs)(c.d,{children:[Object(d.jsx)(c.b,{path:"/login",element:Object(d.jsx)(L,{handleSignUpOrLogin:o})}),Object(d.jsx)(c.b,{path:"/signup",element:Object(d.jsx)(y,{handleSignUpOrLogin:o})}),Object(d.jsx)(c.b,{path:"/*",element:Object(d.jsx)(c.a,{to:"/login"})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(d.jsx)(m.a,{children:Object(d.jsx)(ee,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[187,1,2]]]);
//# sourceMappingURL=main.5a3f0268.chunk.js.map